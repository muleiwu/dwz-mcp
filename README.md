# Mliev çŸ­ç½‘å€ MCP å®¢æˆ·ç«¯

åŸºäº MCPï¼ˆModel Context Protocolï¼‰åè®®çš„çŸ­ç½‘å€ç®¡ç†å®¢æˆ·ç«¯ï¼Œä¸º AI åŠ©æ‰‹æä¾›å®Œæ•´çš„çŸ­ç½‘å€ç”Ÿæˆã€ç®¡ç†å’Œç»Ÿè®¡åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ”— **çŸ­ç½‘å€åˆ›å»º**: æ”¯æŒè‡ªå®šä¹‰åŸŸåã€çŸ­ä»£ç ã€æ ‡é¢˜å’Œæè¿°
- ğŸ“‹ **æ‰¹é‡æ“ä½œ**: ä¸€æ¬¡æ€§åˆ›å»ºå¤šä¸ªçŸ­ç½‘å€ï¼Œæé«˜æ•ˆç‡
- ğŸ” **æœç´¢ç­›é€‰**: æ”¯æŒåŸŸåç­›é€‰å’Œå…³é”®è¯æœç´¢
- ğŸ“Š **ç»Ÿè®¡åˆ†æ**: è·å–è¯¦ç»†çš„ç‚¹å‡»ç»Ÿè®¡ä¿¡æ¯
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- ğŸ”’ **å®‰å…¨è®¤è¯**: åŸºäº Bearer Token çš„ API è®¤è¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- npm æˆ– yarn

### å®‰è£…ä¾èµ–

```bash
npm install
```

### é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿å¹¶é…ç½®ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```bash
# è¿œç¨‹çŸ­ç½‘å€æœåŠ¡å™¨é…ç½®
REMOTE_BASE_URL=https://api.example.com
REMOTE_API_KEY=your-api-key-here

# å…¶ä»–å¯é€‰é…ç½®
REQUEST_TIMEOUT=10000
MAX_RETRIES=3
LOG_LEVEL=info
```

### å¯åŠ¨æœåŠ¡

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start
```

## ğŸ“– MCP å·¥å…·åˆ—è¡¨

### 1. create_short_url
åˆ›å»ºæ–°çš„çŸ­ç½‘å€

**å‚æ•°ï¼š**
- `original_url` (å¿…å¡«): åŸå§‹URLåœ°å€
- `domain` (å¿…å¡«): çŸ­ç½‘å€åŸŸå
- `title` (å¿…å¡«): ç½‘é¡µæ ‡é¢˜
- `custom_code` (å¯é€‰): è‡ªå®šä¹‰çŸ­ä»£ç 
- `description` (å¯é€‰): æè¿°ä¿¡æ¯
- `expire_at` (å¯é€‰): è¿‡æœŸæ—¶é—´

**ç¤ºä¾‹ï¼š**
```json
{
  "original_url": "https://www.example.com/products",
  "domain": "short.ly",
  "title": "äº§å“é¡µé¢",
  "description": "æˆ‘ä»¬çš„äº§å“å±•ç¤ºé¡µé¢",
  "custom_code": "products"
}
```

### 2. get_url_info
è·å–çŸ­ç½‘å€è¯¦ç»†ä¿¡æ¯

**å‚æ•°ï¼š**
- `id` (å¿…å¡«): çŸ­ç½‘å€ID

**ç¤ºä¾‹ï¼š**
```json
{
  "id": 123
}
```

### 3. list_short_urls
åˆ—å‡ºçŸ­ç½‘å€ï¼Œæ”¯æŒåˆ†é¡µå’Œæœç´¢

**å‚æ•°ï¼š**
- `page` (å¯é€‰): é¡µç ï¼Œé»˜è®¤1
- `page_size` (å¯é€‰): æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10
- `domain` (å¯é€‰): åŸŸåç­›é€‰
- `keyword` (å¯é€‰): æœç´¢å…³é”®è¯

**ç¤ºä¾‹ï¼š**
```json
{
  "page": 1,
  "page_size": 20,
  "domain": "short.ly",
  "keyword": "äº§å“"
}
```

### 4. delete_short_url
åˆ é™¤çŸ­ç½‘å€

**å‚æ•°ï¼š**
- `id` (å¿…å¡«): çŸ­ç½‘å€ID

**ç¤ºä¾‹ï¼š**
```json
{
  "id": 123
}
```

### 5. batch_create_short_urls
æ‰¹é‡åˆ›å»ºçŸ­ç½‘å€

**å‚æ•°ï¼š**
- `urls` (å¿…å¡«): URLæ•°ç»„ï¼ˆæœ€å¤š50ä¸ªï¼‰
- `domain` (å¿…å¡«): çŸ­ç½‘å€åŸŸå

**ç¤ºä¾‹ï¼š**
```json
{
  "urls": [
    "https://www.example1.com",
    "https://www.example2.com"
  ],
  "domain": "short.ly"
}
```

### 6. list_domains
è·å–æ‰€æœ‰å¯ç”¨åŸŸååˆ—è¡¨

**å‚æ•°ï¼š** æ— éœ€å‚æ•°

**ç¤ºä¾‹ï¼š**
```json
{}
```

**è¿”å›ä¿¡æ¯ï¼š**
- åŸŸååŸºæœ¬ä¿¡æ¯ï¼šIDã€åŸŸåã€åè®®
- ç½‘ç«™ä¿¡æ¯ï¼šç½‘ç«™åç§°ã€å¤‡æ¡ˆä¿¡æ¯
- é…ç½®ä¿¡æ¯ï¼šæ˜¯å¦æ¿€æ´»ã€å‚æ•°é€ä¼ è®¾ç½®
- ç»Ÿè®¡ä¿¡æ¯ï¼šæ€»æ•°ã€æ¿€æ´»æ•°é‡ã€æœªæ¿€æ´»æ•°é‡

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
mliev-dwz-mcp/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.js                 # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ remoteConfig.js      # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ httpClient.js        # HTTPå®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ shortLinkService.js  # çŸ­é“¾æ¥æœåŠ¡
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ validation.js        # å‚æ•°éªŒè¯
â”‚   â”‚   â””â”€â”€ errorHandler.js      # é”™è¯¯å¤„ç†
â”‚   â””â”€â”€ mcp/
â”‚       â”œâ”€â”€ server.js            # MCPæœåŠ¡å™¨
â”‚       â””â”€â”€ tools/               # MCPå·¥å…·
â”‚           â”œâ”€â”€ createShortUrl.js
â”‚           â”œâ”€â”€ getUrlInfo.js
â”‚           â”œâ”€â”€ listShortUrls.js
â”‚           â”œâ”€â”€ deleteShortUrl.js
â”‚           â”œâ”€â”€ batchCreateShortUrls.js
â”‚           â””â”€â”€ listDomains.js
â”œâ”€â”€ tests/                       # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ package.json                 # é¡¹ç›®é…ç½®
â”œâ”€â”€ .env.example                 # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
```

## ğŸ”§ å¼€å‘æŒ‡å—

### å¯ç”¨è„šæœ¬

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆçƒ­é‡è½½ï¼‰
npm run dev

# æ„å»ºé¡¹ç›®
npm run build

# è¿è¡Œç”Ÿäº§ç¯å¢ƒ
npm start

# è¿è¡Œæµ‹è¯•
npm test

# ä»£ç æ£€æŸ¥
npm run lint

# è‡ªåŠ¨ä¿®å¤ä»£ç æ ¼å¼
npm run format
```

### æ·»åŠ æ–°å·¥å…·

1. åœ¨ `src/mcp/tools/` ç›®å½•ä¸‹åˆ›å»ºæ–°å·¥å…·æ–‡ä»¶
2. å®ç°å·¥å…·å¯¹è±¡ï¼ŒåŒ…å« `name`ã€`description`ã€`inputSchema` å’Œ `handler`
3. åœ¨ `src/mcp/server.js` ä¸­æ³¨å†Œæ–°å·¥å…·

### é”™è¯¯å¤„ç†

é¡¹ç›®ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š

- `ErrorHandler.asyncWrapper()`: åŒ…è£…å¼‚æ­¥å‡½æ•°ï¼Œè‡ªåŠ¨å¤„ç†é”™è¯¯
- `CustomError`: è‡ªå®šä¹‰é”™è¯¯åŸºç±»
- `ValidationError`: å‚æ•°éªŒè¯é”™è¯¯
- `NetworkError`: ç½‘ç»œè¯·æ±‚é”™è¯¯

## ğŸ“ API è§„èŒƒ

### å“åº”æ ¼å¼

æ‰€æœ‰APIå“åº”éƒ½éµå¾ªç»Ÿä¸€æ ¼å¼ï¼š

```json
{
  "success": true,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    // å“åº”æ•°æ®
  },
  "meta": {
    "operation": "æ“ä½œåç§°",
    "timestamp": "2024-01-01T00:00:00.000Z"
  }
}
```

### é”™è¯¯å“åº”

```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "é”™è¯¯æè¿°",
    "details": {},
    "timestamp": "2024-01-01T00:00:00.000Z"
  }
}
```

## ğŸ” é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ | å¿…å¡« |
|--------|------|--------|------|
| `REMOTE_BASE_URL` | è¿œç¨‹æœåŠ¡å™¨åœ°å€ | - | âœ… |
| `REMOTE_API_KEY` | APIå¯†é’¥ | - | âœ… |
| `API_VERSION` | APIç‰ˆæœ¬ | v1 | âŒ |
| `REQUEST_TIMEOUT` | è¯·æ±‚è¶…æ—¶æ—¶é—´(ms) | 10000 | âŒ |
| `MAX_RETRIES` | æœ€å¤§é‡è¯•æ¬¡æ•° | 3 | âŒ |
| `LOG_LEVEL` | æ—¥å¿—çº§åˆ« | info | âŒ |

### åŸŸåé…ç½®

ç¡®ä¿ä½¿ç”¨çš„åŸŸååœ¨è¿œç¨‹çŸ­ç½‘å€æœåŠ¡ä¸­å·²æ­£ç¡®é…ç½®ã€‚

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ `REMOTE_BASE_URL` å’Œ `REMOTE_API_KEY` é…ç½®
   - ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸
   - éªŒè¯è¿œç¨‹æœåŠ¡çŠ¶æ€

2. **è®¤è¯å¤±è´¥**
   - ç¡®è®¤ API å¯†é’¥æ­£ç¡®
   - æ£€æŸ¥å¯†é’¥æ˜¯å¦æœ‰è¶³å¤Ÿæƒé™

3. **å‚æ•°éªŒè¯å¤±è´¥**
   - æ£€æŸ¥å‚æ•°æ ¼å¼æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤å¿…å¡«å‚æ•°éƒ½å·²æä¾›

### æ—¥å¿—è°ƒè¯•

è®¾ç½®æ—¥å¿—çº§åˆ«ä¸º debug æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼š

```bash
LOG_LEVEL=debug npm start
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æº - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ†˜ æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤) éƒ¨åˆ†
2. æœç´¢ç°æœ‰çš„ [Issues](https://github.com/mliev/mliev-dwz-mcp/issues)
3. åˆ›å»ºæ–°çš„ Issue æè¿°é—®é¢˜

## ğŸ“Š ç‰ˆæœ¬å†å²

- **v1.0.0** - åˆå§‹ç‰ˆæœ¬
  - åŸºæœ¬çš„çŸ­ç½‘å€ç®¡ç†åŠŸèƒ½
  - MCP åè®®æ”¯æŒ
  - å®Œæ•´çš„é”™è¯¯å¤„ç†æœºåˆ¶